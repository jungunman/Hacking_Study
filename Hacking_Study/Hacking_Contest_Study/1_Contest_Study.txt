해킹 대회 문제.pcap

제 1회 해킹 문제 연습.
해킹 대회의 느낌을 익히고 방법과 이론을 공부하고 정리하는 것을 중점으로 함.

# 문제 1 - Telnet... (Hint : Key is telnet Password)
	## Telnet?) 
	Telnet의 문제를 풀기 위해선 Telnet에 대해서 알아야했다.
	 TCP/IP 기반의 프로토콜이고, 23번 포트를 이용한다. (규약)
	 보안상 사용자가 포트 변경이 가능하다.
	 원격 터미널 접속 서비스다.

	## Telnet의 취약점)
	 직접 네트워크를 통해 넘기기 때문에 누구나 해당 정보를 열어볼 수 있음.
	 모든 데이터를 평문으로 전송하여 ID/PWD 및 실행한 명령어를 볼 수 있다.

	##보안 문제를 위한 해결 방안 -> SSH (Secure Shell Protocol)
	 간단하게 알아보면,
	 네트워크 프로토콜중 하나이며, public한 Network를 통해 서로 통신할 때 보안을 중시하여 안전하게 통신하기 위해 사용하는 프로토콜임.
	 데이터 전송과 원격 제어에 사용한다.
	 
	##SSH작동 원리
	 Private Key와 Public Key를 이용하여 인증 과정을 거친다.
	 Public Key는 공개가능, 암호화는 가능하지만 복호화 불가.
	 Private Key는 절대 공개X 컴퓨터 내부에 저장되어있으며, 암호화된 메세지를 복호화 할 수있음.

문제풀이)

문제를 집어보면 Telnet이라고 되어있고 다른 문제로는 텔넷은 다보여라고 작성되어있었다.
힌트는 이곳의 패스워드를 입력하라고 되어있는 것을 보니 패스워드를 찾아 입력하면 되는 것 같았다.
Telnet만 검색하면 되기에 Filter를 이용하여 Telnet만 보도록 했다. (사용 프로그램 : WireShark)
Follow -> TCP Stream을 클릭하면 ubuntu login과 Pwd를 볼 수 있었다.
거기에 적혀있는 PWD를 입력하면 해당 문제는 해결.

문제를 풀며 느낀 점)
해당 문제는 내가 제일 처음 접한 문제다. Hint와 1번째 문제는 딱 Telnet...이라고만 되어있어 도대체 텔넷이 어쩌라고? 라는 느낌이 강했다.
그래서 검색을 통해 텔넷이 무엇인가 하니, 아 저런 취약점이 있구나를 찾을 수 있었다.
실제로도 wireShark를 사용할 때 Follow -> TCP Stream을 보는 방법을 알고 있었고, 그것으로 답을 봤음에도 불구하고 (PWD도 봤었다.) 어쩌라고? 생각했다.
그래서 하나하나 텔넷을 분석해보자 하고 직접하나하나 클릭하여 까봤더니 결국에는 TCP Stream으로 본것을 나눠 데이터를 전송한 것일 뿐이었다. 
말그대로 Stream은 모든 흐름을 모아뒀던 것이었다!
답을 찾았으나 맞추지 못했다.

# 문제 2 - 웹 서핑 중에 실행된 웹쉘을 찾아라 (Hint :IIS 세미콜론 취약점을 이용한 웹쉘)
	##WebShell
	 해당 문제를 풀기 위해선 WebShell을 알아야 했다.
	 WebShell은 파일 업로드 기능을 이용하여 시스템에 명령하는 코드를 심어 공격하는 것이라고 설명한다.
	 간단한 서버 스크립트로 작성되며(jsp,php,asp)로 만드는 방법이 널리 사용된다. 이외에도 더 있긴 했다. 자세한 사항은 http://www.igloosec.co.kr/BLOG_Webshell%20%EB%B6%84%EB%A5%98%20%EB%B0%8F%20%EB%8C%80%EC%9D%91%EB%B0%A9%EC%95%88?searchItem=&searchWord=&bbsCateId=1&gotoPage=1 에서 확인이 가능했다.
	 시스템이 장악하기에 매우 위험한 공격이다.

	 ##IIS 세미콜론 취약점을 이용한 웹쉘
	 위험도는 매우 상이다.
	 작동원리는 간단했다.
	 프로그램상에서 ;콜론을 기준으로 뒤의 문자는 해석하지 않는다.
	 고로 파일을 .서버_스크립트확장자;.jpg를 업로하게 된다면 .서버_스크립트를 작동하고 .jpg로 인식하지 않는다는 것이다.
	 이와 비슷한 예제를 예전에 봤던 것 같다.
	 게시물을 만들 때, 코드를 입력하면 DB에 들어가서 명령어가 작동되는 예였다. 비슷한 종류의 공격같다.
	 IIS 세미콜론 취약점은 asp파일로 작동하는 것을 알았다.


	 
문제풀이)
WebShell에는 다양한 서버 스크립트로 공격할 수 있단 것을 알 수 있었다.
그중에서 IIS 취약점은 ASP를 이용한다는 정보를 얻을 수 있었다.
확장자를 무시하기 위해 ';'로 끝나기 떄문에 ".asp;"를 검색하면 웹쉘을 찾을 수 있지 않을까? 확장자는 .jpg,gif 등 다양하기에 확장자를 이용하여 찾는 것은 힘들다고 판단한 것.
Control+f로 find창을 열어 .asp;를 검색하니 하나의 패킷을 가리켰고, HTP(HyperText Transfer Protocol)을 여니 Post 메소드로 .asp;.jpg파일이 전송된 것을 확인 할 수 있었다.
답은 그 파일의 이름이었다.

문제를 풀며 느낀 점)
WebShell이라는 공격기법은 처음 들어보지만 이러한 사례는 자바 코딩공부를하며 위험하다고 배웠었다. 
그래서 확장자를 확인하고, 스크립트 언어를 그냥 문자로 만드는 API를 사용하여 프로그래밍을 해야한다고 배웠었다.
그러나 처음 접한 해킹 문제에서 WebShell로 공격한 패킷을 찾는 것은 막막한 것이었다.
IIS 세미콜론 취약점을 이용한 웹쉘이라고 힌트를 줘도, 그것으로 검색해볼 생각하지 않고, WebShell만 검색하여 무엇인지 알아냈다.
jsp,asp,php,asp.net등을 확인할 수 있었고, 이걸 어떻게 찾으라고? 싶었다.
IIS 세미콜론 취약점이라고 검색했다면 쉽게 풀 수 있을 문제였다.





# 문제 3 - 누군가 80포트를 통해 나의 중요한 파일을 삭제했다. 그 파일의 이름은 무엇인가?
# 문제 4 - 메일을 보고 이곳으로 와줘!
# 문제 5 - 뭐가 궁금해? 네이버에서 검색해 봐
# 문제 6 - 이번엔 어디로 놀러갈까?
# 문제 7 - 동건이는 악성 앱을 설치하였다. 이 때 정보가 빠져나갔다. 빠져나간 시간을 찾아라.
# 문제 8 - 메신저로 전달된 우탱이 먹고 싶은 라면의 이름은?
